'use strict';

// tests for generateQR
// Generated by serverless-jest-plugin

import * as handler from '../handler';
import * as jestPlugin from 'serverless-jest-plugin';

const lambdaWrapper = jestPlugin.lambdaWrapper;

const wrapped = lambdaWrapper.wrap(handler, { handler: 'generateQR' });

describe('generateQR', () => {
  beforeAll((done) => {
//  lambdaWrapper.init(liveFunction); // Run the deployed lambda

    done();
  });

  it('should return an SVG header', () => {
    return wrapped.run({
      body: JSON.stringify({
        'url': 'https://www.google.com',
      })
    }).then((response) => {
      expect(response.headers['Content-Type']).toBe('image/svg+xml');
    });
  });

  it('should return a 500 error if no url is passed', () => {
    return wrapped.run({
      body: JSON.stringify({
        'url': '',
      })
    }).then((response) => {
      expect(response.statusCode).toBe(500);
    });
  });
});
